<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core">

<h:head>
    <title>Product Catalogue</title>

</h:head>

<h:body>
    <div class="container">
        <h1>Product Catalogue Management</h1>

        <h:messages styleClass="message"/>

        <h:form>
            <div class="search-box">
                <h:inputText value="#{produitBean.motCle}"
                             placeholder="Search products..."
                             styleClass="input"/>

                <h:commandButton value="Search"
                                 action="#{produitBean.searchProduits()}"
                                 styleClass="btn btn-primary"/>

                <h:commandButton value="Reset"
                                 action="#{produitBean.resetSearch()}"
                                 styleClass="btn btn-warning"/>

                <h:commandButton value="➕ Add New Product"
                                 action="#{produitBean.goToAddForm}"
                                 styleClass="btn btn-primary"
                                 style="float: right;"/>
            </div>

            <h:dataTable value="#{produitBean.produits}"
                         var="prod"
                         rendered="#{not empty produitBean.produits}"
                         styleClass="table">

                <h:column>
                    <f:facet name="header">ID</f:facet>
                    #{prod.id}
                </h:column>

                <h:column>
                    <f:facet name="header">Product Name</f:facet>
                    #{prod.nomProduit}
                </h:column>

                <h:column>
                    <f:facet name="header">Designation</f:facet>
                    #{prod.designation}
                </h:column>

                <h:column>
                    <f:facet name="header">Price (€)</f:facet>
                    <h:outputText value="#{prod.prix}">
                        <f:convertNumber type="currency" currencySymbol="€"/>
                    </h:outputText>
                </h:column>

                <h:column>
                    <f:facet name="header">Actions</f:facet>

                    <h:commandButton value="Edit"
                                     action="#{produitBean.editProduit(prod)}"
                                     styleClass="btn btn-warning"/>

                    <h:commandButton value="Delete"
                                     action="#{produitBean.deleteProduit(prod.id)}"
                                     styleClass="btn btn-danger"
                                     onclick="return confirm('Are you sure you want to delete this product?');">
                        <f:ajax execute="@form" render="@form"/>
                    </h:commandButton>
                </h:column>
            </h:dataTable>

            <h:panelGroup rendered="#{empty produitBean.produits}">
                <p style="text-align: center; color: #999; padding: 40px;">
                    No products found. Click "Add New Product" to get started!
                </p>
            </h:panelGroup>
        </h:form>
    </div>
</h:body>
</html>
